<!DOCTYPE html>
<html lang="en">
    <meta charset="UTF-8">
        <title>Survey Challenge</title>
    </meta>
    <head>
        <link rel="stylesheet" type="text/css" href="resources/styles/survey.css">
    </head>

  <body>
  
    <div id="survey-app">
        <h1>New Customer Survey</h1>
        <question-item
          v-for="item in questionArray"
          v-bind:question="item"
          v-bind:key="item.id">
        </question-item>
        
    </div>

    <!-- development build of vue.js -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>
    <!-- sample survey questions from http://docs.fluidsurveys.com/fluidsurveys/api/json.html --> 
    <script type="text/javascript" src="data/survey1.json"></script>
    <script>

        const mySurvey = data;
        const totalQuestionNumber = mySurvey.form[0].children.length;
        const mySurveyQuestions = mySurvey.form[0].children;
        const defaultQuestionIndex = '0';
        
        Vue.component('question-item', {
            props: ['question'],
            template: `<div class="questionContainer" data-attribute-question-id:question.id>
            
                <div id:question.id>
                    
                    <span class="questionTitleSpan">{{ question.title.en }}</span> <span class="questionDescriptionSpan">{{ question.description.en }}</span><br><br>

                    <div v-if="question.idname=='text-response'">
                        <input type="text" placeholder:question.placeholder>
                    </div>
                    <div v-if="question.idname=='single-choice'">
                    SINGLE FOUND
                        <span v-for="choice in question.choices">{{ choice.label.en }}</span>
                    </div>

                </div>
            </div>`
            
            /*
            <input type="button" id="current_form_previous_question_button" value="Previous Question" data-attribute-question-number:previousQuestionIndex><!-- style="display:none" -->
                    <input type="button" id="current_form_next_question_button" value="Next Question" data-attribute-question-number:nextQuestionIndex v-on:click="updateQuestion(nextQuestionIndex)"><!-- style="display:none" -->
            */
            //Survey Completion: {{ surveyCompletePercentage }}%<br><br>
        })

        new Vue({
            el: "#survey-app",
            data: {
                questionArray: 
                    mySurveyQuestions
                
            }

            /*methods: {
                updateQuestion: function (i) {
                    let buildForm = [];
                    let currentQuestionIndex = i;
                    let currentQuestionNumber = i + 1;
                    let currentQuestion = mySurvey.form[0].children[i];
                    let currentQuestionType = mySurvey.form[0].children[i].idname;

                    // next/previous navigation logic
                    buildForm.nextQuestionIndex = i + 1;
                    buildForm.previousQuestionNumber = '';
                    if (buildForm.currentQuestionIndex != 0) {
                        buildForm.previousQuestionIndex = currentQuestionIndex - 1;
                    }

                    // survey status logic
                    buildForm.surveyCompletePercentage = currentQuestionIndex / totalQuestionNumber * 100;
                },
            },*/
            /*beforeMount(){
                this.updateQuestion(defaultQuestionIndex)
            }*/

        });

    </script>

  </body>
</html>